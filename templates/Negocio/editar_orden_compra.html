{% extends 'base.html' %}

{% load static %}

{% block titulo %}Orden de compra #{{orden.id_orden_compra}}{% endblock titulo %}

{% block pag_actual %}ordenes-compra{% endblock pag_actual %}

{% block contenido %}
    <article>
        <form method="post" class="row">
        {% csrf_token %}
            <div class="col-12 mb-4">
                <h2>Orden de compra #{{ orden.id_orden_compra }}</h2>
            </div>
            <div class="col-2 col-md-4 mb-4">
                <a href="{% url 'listar_ordenes_compra' %}" class="btn btn-primary">
                    <span class="bi-chevron-left"></span>
                    <span class="d-none d-md-inline"> Volver</span>
                </a>
            </div>
            <div class="col-10 col-md-8 mb-4 text-end">
                <div class="btn-group">
                    <button type="submit" {% if tiene_factura %}disabled{% endif %} class="btn btn-primary">Actualizar</button>
                    {% if not tiene_factura %}
                    <a href="{% url 'generar_factura' orden.id_orden_compra %}" class="btn btn-primary">Generar factura</a>
                    {% else %}
                    <a href="{% url 'detalle_factura' orden.factura.nro_factura %}" class="btn btn-primary">Ver factura</a>
                    {% endif %}
                </div>
                <button class="btn btn-primary">?</button>
            </div>
            <div class="col-12">
                <p class="lead">Fecha de creación: {{ orden.fecha_orden_compra|date:'d-m-Y' }}</p>
            </div>
            <div class="col-md-6">
                <h3>Detalles</h3>
                {% for form in form_oc %}
                <div class="form-group d-grid mb-4">
                    {{ form.label_tag }}
                    {{ form }}
                    {% if form.errors %}
                        {{ form.errors }}
                        {{ form.help_text }}
                    {% endif %}
                </div>
                {% endfor %}
            </div>
            <div class="col-md-6">
                <h3>Huéspedes</h3>
                {{ form_huespedes.management_form }}
                {{ form_huespedes.non_field_errors }}
                {% for form in form_huespedes %}
                <div class="form-group d-grid mb-4">
                    {{ form.label_tag }}
                    {{ form }}
                    {% if form.errors %}
                        {{ form.errors }}
                        {{ form.help_text }}
                    {% endif %}
                </div>
                {% endfor %}
            </div>
        </form>
    </article>
{% endblock contenido %}